<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="it-loading.html" />

<polymer-element name="it-list" attributes="databaseId">
  <template>
    <it-loading loading?="{{!items.length}}">
      <template repeat="{{ item in items }}">
        <a href="{{ item.uri }}"><div title="{{ item.uuid }}">{{ item.name }}</div></a>
      </template>
    </it-loading>
  </template>

  <script>
    Polymer('it-list',{
      databaseId : '',
      items: [],
      error: null,
      ready: function(){
        var self = this;
        var db = document.querySelector('#'+this.databaseId);
        db.fetchAll(function(err, items){
          if(err){
            self.error = err;
          }else{
            self.items = items;
          }
        });
      }
    });
  </script>
</polymer-element>
