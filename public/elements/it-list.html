<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="it-async-container.html">

<polymer-element name="it-list" attributes="databaseUrl">
  <template>
    <it-async-container 
      getUrl="{{ databaseUrl+'items' }}"
      on-error="{{ handleError }}"
      on-response="{{ handleResponse }}">
      
      <template repeat="{{ item in items }}">
        <a href="{{ item.uri }}"><div title="{{ item.uuid }}">{{ item.name }}</div></a>
      </template>
    
    </it-async-container>
  </template>

  <script>
    Polymer('it-list',{
      databaseUrl : '',
      items: [],
      error: null,
      handleError: function(iEvent, iError){
        console.log('ooops ! that\'s an error !');
        error = iError;
      },
      handleResponse: function(iEvent, iResponse){
        console.log(JSON.stringify(iResponse));
        this.items = iResponse;
      }
    });
  </script>
</polymer-element>
